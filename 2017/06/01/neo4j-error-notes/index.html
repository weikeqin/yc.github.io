<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">



  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">










<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '4MYO215Y0R',
      apiKey: '63ec2e526818df599ef4caa3c72f3459',
      indexName: 'weikeqin',
      hits: {"per_page":10},
      labels: {"input_placeholder":"输入关键字","hits_empty":"没有找到相关内容: ${query}","hits_stats":"${hits} 条相关记录，共耗时 ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="把使用neo4j时遇到的一些常见的问题、错误分享给大家  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。 (1)　启动问题(1.1) Neo4j启动没反应但也不报错  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK">
<meta name="keywords" content="neo4j">
<meta property="og:type" content="article">
<meta property="og:title" content="Neo4j error 笔记">
<meta property="og:url" content="http://weikeqin.com/2017/06/01/neo4j-error-notes/index.html">
<meta property="og:site_name" content="沧海一粟">
<meta property="og:description" content="把使用neo4j时遇到的一些常见的问题、错误分享给大家  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。 (1)　启动问题(1.1) Neo4j启动没反应但也不报错  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://blog.csdn.net/zqz_zqz/article/details/52235479">
<meta property="og:image" content="https://stackoverflow.com/questions/4584904/what-causes-the-broken-pipe-error">
<meta property="og:updated_time" content="2019-07-05T09:09:57.180Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Neo4j error 笔记">
<meta name="twitter:description" content="把使用neo4j时遇到的一些常见的问题、错误分享给大家  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。 (1)　启动问题(1.1) Neo4j启动没反应但也不报错  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK">
<meta name="twitter:image" content="https://blog.csdn.net/zqz_zqz/article/details/52235479">



  <link rel="alternate" href="/atom.xml" title="沧海一粟" type="application/atom+xml">




  <link rel="canonical" href="http://weikeqin.com/2017/06/01/neo4j-error-notes/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Neo4j error 笔记 | 沧海一粟</title>
  






  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d4a41cd2b759aa5c8e03c8d94cd23ed9";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">沧海一粟</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



  



</div>
    </header>

    
  
  
  
    
      
    
    <a href="undefined" class="github-corner" target="_blank" title aria-label><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#222; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg>
    
      </a>
    



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://weikeqin.com/2017/06/01/neo4j-error-notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WKQ">
      <meta itemprop="description" content="不积跬步无以至千里">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="沧海一粟">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Neo4j error 笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-06-01 15:49:45" itemprop="dateCreated datePublished" datetime="2017-06-01T15:49:45+08:00">2017-06-01</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/neo4j/" itemprop="url" rel="index"><span itemprop="name">neo4j</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/06/01/neo4j-error-notes/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2017/06/01/neo4j-error-notes/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2017/06/01/neo4j-error-notes/" class="leancloud_visitors" data-flag-title="Neo4j error 笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数：</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>  把使用neo4j时遇到的一些常见的问题、错误分享给大家<br>  这要包括 启动问题、前端问题、导入数据问题、工程问题、部署问题，欢迎大家补充。</p>
<h1 id="1-启动问题"><a href="#1-启动问题" class="headerlink" title="(1)　启动问题"></a>(1)　启动问题</h1><h1 id="1-1-Neo4j启动没反应但也不报错"><a href="#1-1-Neo4j启动没反应但也不报错" class="headerlink" title="(1.1) Neo4j启动没反应但也不报错"></a>(1.1) Neo4j启动没反应但也不报错</h1><p>  在服务器上用neo4j start启动neo4j，没有任何反应，用neo4j console启动也没反应<br>  JDK的问题，换成Oracle JDK-1.8，不要用Open JDK</p>
<a id="more"></a>
<h1 id="1-2-org-neo4j-server-database-LifecycleManagingDatabase-was-successfully-initialized-but-failed-to-start"><a href="#1-2-org-neo4j-server-database-LifecycleManagingDatabase-was-successfully-initialized-but-failed-to-start" class="headerlink" title="(1.2) org.neo4j.server.database.LifecycleManagingDatabase was successfully initialized, but failed to start"></a>(1.2) org.neo4j.server.database.LifecycleManagingDatabase was successfully initialized, but failed to start</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">警告: This command does not appear to be running with administrative</span><br><span class="line">rights.  Some commands may fail e.g. Start/Stop</span><br><span class="line">2017-03-23 03:01:33.868+0000 INFO  Starting...</span><br><span class="line">2017-03-23 03:01:34.729+0000 INFO  Bolt enabled on 0.0.0.0:7687.</span><br><span class="line">2017-03-23 03:01:34.838+0000 ERROR Failed to start Neo4j: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4&apos; was successfully initialized, but failed to start. Please see attached cause exception. Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4&apos; was successfully initialized, but failed to start. Please seeattached cause exception.</span><br><span class="line">org.neo4j.server.ServerStartupException: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@5dc1b1c4&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line"></span><br><span class="line">Caused by: java.lang.RuntimeException: Error starting org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory, C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\C:ProfessionSofwareNeo4j\databases\charles.graph.db</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &apos;org.neo4j.kernel.internal.StoreLockerLifecycleAdapter@3edf2098&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.StoreLockException: Unable to create path for store dir: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\C:ProfessionSofwareNeo4j\databases\charles.graph.db. Please ensureno other process is using this database, and that the directory is writable (required even for read-only access)</span><br><span class="line">        at org.neo4j.kernel.internal.StoreLocker.storeLockException(StoreLocker.java:94)</span><br><span class="line"></span><br><span class="line">Caused by: java.io.IOException: Unable to create directory path [C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\C:ProfessionSofwareNeo4j\databases\charles.graph.db] for Neo4j store.</span><br><span class="line">        at org.neo4j.io.fs.DefaultFileSystemAbstraction.mkdirs(DefaultFileSystemAbstraction.java:113)</span><br><span class="line">        at org.neo4j.kernel.internal.StoreLocker.checkLock(StoreLocker.java:64)</span><br></pre></td></tr></table></figure>
<p>  Unable to create path for store dir， 没有写权限<br>  遇到这个问题，一般都是和路径或者权限有关</p>
<p>最后发现原因是配置文件里dbms.directories.data路径写错了</p>
<h2 id="1-3-TLS-private-key-found-but-missing-certificate"><a href="#1-3-TLS-private-key-found-but-missing-certificate" class="headerlink" title="(1.3)　TLS private key found, but missing certificate"></a>(1.3)　TLS private key found, but missing certificate</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\bin&gt;neo4j console</span><br><span class="line">警告: This command does not appear to be running with administrative rights.  Some</span><br><span class="line">commands may fail e.g. Start/Stop</span><br><span class="line">2017-04-24 07:06:54.426+0000 ERROR Failed to start Neo4j: TLS private key found, but missing certificate at &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\certificates\neo4j.cert&apos;. Cannot start ser</span><br><span class="line">ver without certificate. TLS private key found, but missing certificate at &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\certificates\neo4j.cert&apos;. Cannot start server without certificate.</span><br><span class="line">org.neo4j.server.ServerStartupException: TLS private key found, but missing certificate at &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\certificates\neo4j.cert&apos;. Cannot start server without certi</span><br><span class="line">ficate.</span><br><span class="line">        at org.neo4j.server.AbstractNeoServer.createKeyStore(AbstractNeoServer.java:387)</span><br><span class="line">        at org.neo4j.server.AbstractNeoServer.init(AbstractNeoServer.java:183)</span><br><span class="line">        at org.neo4j.server.AbstractNeoServer.start(AbstractNeoServer.java:196)</span><br><span class="line">        at org.neo4j.server.ServerBootstrapper.start(ServerBootstrapper.java:91)</span><br><span class="line">        at org.neo4j.server.ServerBootstrapper.start(ServerBootstrapper.java:68)</span><br><span class="line">        at org.neo4j.server.CommunityEntryPoint.main(CommunityEntryPoint.java:28)</span><br></pre></td></tr></table></figure>
<p>有neo4j.key但是没有neo4j.cert文件，刚才把neo4j.cert误删了</p>
<h1 id="1-4-browser-scripts-8eea4b31-components-js-org-eclipse-jetty-util-SharedBlockingCallback-BlockerTimeoutException"><a href="#1-4-browser-scripts-8eea4b31-components-js-org-eclipse-jetty-util-SharedBlockingCallback-BlockerTimeoutException" class="headerlink" title="(1.4)　/browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException"></a>(1.4)　/browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[admin@user01 neo4j-community-3.1.3]$ ./bin/neo4j console</span><br><span class="line">Starting Neo4j.</span><br><span class="line">WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.</span><br><span class="line">2017-05-03 12:00:12.496+0000 INFO  ======== Neo4j 3.1.3 ========</span><br><span class="line">2017-05-03 12:00:12.880+0000 INFO  Starting...</span><br><span class="line">2017-05-03 12:00:13.825+0000 INFO  Bolt enabled on 0.0.0.0:7687.</span><br><span class="line">2017-05-03 12:00:19.550+0000 INFO  Started.</span><br><span class="line">2017-05-03 12:00:20.975+0000 INFO  Remote interface available at http://0.0.0.0:7474/</span><br><span class="line">2017-05-03 12:02:23.689+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:234)</span><br><span class="line"></span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line"></span><br><span class="line">2017-05-03 12:02:23.690+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line"></span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line"></span><br><span class="line">2017-05-03 12:03:23.538+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line"></span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line"></span><br><span class="line">2017-05-03 12:03:23.540+0000 WARN  /browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line"></span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:216)</span><br><span class="line">        ... 33 more</span><br><span class="line">^C2017-05-03 12:10:26.531+0000 INFO  Neo4j Server shutdown initiated by request</span><br><span class="line">2017-05-03 12:10:26.566+0000 INFO  Stopping...</span><br><span class="line">2017-05-03 12:10:27.132+0000 INFO  Stopped.</span><br><span class="line">[admin@user01 neo4j-community-3.1.3]$</span><br></pre></td></tr></table></figure>
<h1 id="1-5-Not-possible-to-upgrade-a-store-with-version-‘v0-A-8’-to-current-store-version-v0-A-7-Neo4j-3-1-0"><a href="#1-5-Not-possible-to-upgrade-a-store-with-version-‘v0-A-8’-to-current-store-version-v0-A-7-Neo4j-3-1-0" class="headerlink" title="(1.5)　Not possible to upgrade a store with version ‘v0.A.8’ to current store version v0.A.7 (Neo4j 3.1.0)."></a>(1.5)　Not possible to upgrade a store with version ‘v0.A.8’ to current store version <code>v0.A.7</code> (Neo4j 3.1.0).</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ERROR Failed to start Neo4j: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@77b9886e&apos; was successfully initialized, but failed to start. Please see attached cause exception. Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@77b9886e&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line">org.neo4j.server.ServerStartupException: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@77b9886e&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@77b9886e&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line"></span><br><span class="line">Caused by: java.lang.RuntimeException: Error starting org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory, /home/user1/neo4j_5687/neo4j-community-3.1.0/data/databases/graph.db</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &apos;org.neo4j.kernel.NeoStoreDataSource@7c18987f&apos; was successfully initialized, but failed to start. Please see attached cause exception.</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.impl.storemigration.StoreUpgrader$UnexpectedUpgradingStoreVersionException: Not possible to upgrade a store with version &apos;v0.A.8&apos; to current store version `v0.A.7` (Neo4j 3.1.0).</span><br><span class="line">        at org.neo4j.kernel.impl.storemigration.UpgradableDatabase.checkUpgradeable(UpgradableDatabase.java:135)</span><br><span class="line">        at org.neo4j.kernel.impl.storemigration.StoreUpgrader.migrateIfNeeded(StoreUpgrader.java:130)</span><br><span class="line">        at org.neo4j.kernel.impl.storemigration.DatabaseMigrator.migrate(DatabaseMigrator.java:98)</span><br><span class="line">        at org.neo4j.kernel.NeoStoreDataSource.upgradeStore(NeoStoreDataSource.java:571)</span><br><span class="line">        at org.neo4j.kernel.NeoStoreDataSource.start(NeoStoreDataSource.java:440)</span><br><span class="line">        at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:433)</span><br><span class="line">        ... 14 more</span><br></pre></td></tr></table></figure>
<p>把高版本的数据直接复制到低版本报错。<br>通过neo4j提供的数据迁移jar包迁移数据</p>
<h2 id="1-6-java-lang-IllegalArgumentException-Base-directory-‘C-ProfessionSofware-Neo4j-neo4j-community-3-3-4-certificates-default’-for-SSL-policy-with-name-‘default’-does-not-exist"><a href="#1-6-java-lang-IllegalArgumentException-Base-directory-‘C-ProfessionSofware-Neo4j-neo4j-community-3-3-4-certificates-default’-for-SSL-policy-with-name-‘default’-does-not-exist" class="headerlink" title="(1.6)  java.lang.IllegalArgumentException: Base directory ‘C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default’ for SSL policy with name ‘default’ does not exist."></a>(1.6)  java.lang.IllegalArgumentException: Base directory ‘C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default’ for SSL policy with name ‘default’ does not exist.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\bin</span><br><span class="line">λ neo4j console</span><br><span class="line">2018-04-10 02:29:48.937+0000 INFO  ======== Neo4j 3.3.4 ========</span><br><span class="line">2018-04-10 02:29:48.981+0000 INFO  Starting...</span><br><span class="line">2018-04-10 02:29:49.477+0000 ERROR Failed to start Neo4j: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6&apos; was successfully initialized, but failed to start. Please see the attached cause exception &quot;Base directory &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default&apos; for SSL policy with name &apos;default&apos; does not exist.&quot;. Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6&apos; was successfully initialized, but failed to start. Please see the attached cause exception &quot;Base directory &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default&apos; for SSL policy with name &apos;default&apos; does not exist.&quot;.</span><br><span class="line">org.neo4j.server.ServerStartupException: Starting Neo4j failed: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6&apos; was successfully initialized, but failed to start. Please see the attached cause exception &quot;Base directory &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default&apos; for SSL policy with name &apos;default&apos; does not exist.&quot;.</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Component &apos;org.neo4j.server.database.LifecycleManagingDatabase@1f2586d6&apos; was successfully initialized, but failed to start. Please see the attached cause exception &quot;Base directory &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default&apos; for SSL policy with name &apos;default&apos; does not exist.&quot;.</span><br><span class="line"></span><br><span class="line">Caused by: java.lang.IllegalArgumentException: Base directory &apos;C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default&apos; for SSL policy with name &apos;default&apos; does not exist.</span><br><span class="line">        at org.neo4j.kernel.configuration.ssl.SslPolicyLoader.load(SslPolicyLoader.java:184)</span><br><span class="line">        at org.neo4j.kernel.configuration.ssl.SslPolicyLoader.create(SslPolicyLoader.java:94)</span><br><span class="line">        at org.neo4j.kernel.impl.factory.CommunityEditionModule.&lt;init&gt;(CommunityEditionModule.java:103)</span><br><span class="line">        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.initFacade(GraphDatabaseFacadeFactory.java:159)</span><br><span class="line">        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:126)</span><br><span class="line">        at org.neo4j.server.CommunityNeoServer.lambda$static$0(CommunityNeoServer.java:58)</span><br><span class="line">        at org.neo4j.server.database.LifecycleManagingDatabase.start(LifecycleManagingDatabase.java:88)</span><br><span class="line">        at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:445)</span><br><span class="line">        ... 5 more</span><br><span class="line">2018-04-10 02:29:49.483+0000 INFO  Neo4j Server shutdown initiated by request</span><br></pre></td></tr></table></figure>
<p>ssl配置问题<br>修改neo4j.conf里的配置</p>
<h1 id="2-Neo4j-DespTop-前端展示-问题"><a href="#2-Neo4j-DespTop-前端展示-问题" class="headerlink" title="(2)　Neo4j-DespTop(前端展示)问题"></a>(2)　Neo4j-DespTop(前端展示)问题</h1><h2 id="2-1-WebSocket-connection-failure"><a href="#2-1-WebSocket-connection-failure" class="headerlink" title="(2.1)　WebSocket connection failure"></a>(2.1)　WebSocket connection failure</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: 3</span><br></pre></td></tr></table></figure>
<p>分2种情况：</p>
<ol>
<li>neo4j版本在3.2.0以前<br>1.1 换浏览器<br>1.2 在右边的设置里(齿轮图标)，把Do not use Bolt勾选上</li>
<li>neo4j版本3.2.0及以上<ol>
<li>在浏览器里禁用bolt</li>
<li>在neo4j.conf里禁用bolt</li>
<li>检查JDK版本，推荐使用JDK 1.8， JDK 1.7或者1.9 可能出问题</li>
</ol>
</li>
</ol>
<h2 id="前端页面打不开"><a href="#前端页面打不开" class="headerlink" title="前端页面打不开"></a>前端页面打不开</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2019</span>-<span class="number">06</span>-<span class="number">18</span> <span class="number">10</span>:<span class="number">37</span>:<span class="number">55.940</span>+<span class="number">0800</span> WARN  /browser/vendor-d594bc0d621572ced6b1.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">213</span>)</span><br><span class="line">        ...</span><br><span class="line">        at java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">195</span>)</span><br><span class="line">        ... <span class="number">33</span> more</span><br><span class="line"><span class="number">2019</span>-<span class="number">06</span>-<span class="number">18</span> <span class="number">10</span>:<span class="number">37</span>:<span class="number">55.941</span>+<span class="number">0800</span> WARN  /browser/vendor-d594bc0d621572ced6b1.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">213</span>)</span><br><span class="line">        ...</span><br><span class="line">        at java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">195</span>)</span><br><span class="line">        ... <span class="number">33</span> more</span><br><span class="line"><span class="number">2019</span>-<span class="number">06</span>-<span class="number">18</span> <span class="number">10</span>:<span class="number">37</span>:<span class="number">55.949</span>+<span class="number">0800</span> WARN  /browser/app-d594bc0d621572ced6b1.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">213</span>)</span><br><span class="line">        ...</span><br><span class="line">        at java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">195</span>)</span><br><span class="line">        ... <span class="number">33</span> more</span><br><span class="line"><span class="number">2019</span>-<span class="number">06</span>-<span class="number">18</span> <span class="number">10</span>:<span class="number">37</span>:<span class="number">55.950</span>+<span class="number">0800</span> WARN  /browser/app-d594bc0d621572ced6b1.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">java.io.IOException: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">213</span>)</span><br><span class="line">		...</span><br><span class="line">        at java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">Caused by: org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span><br><span class="line">        at org.eclipse.jetty.util.SharedBlockingCallback$Blocker.block(SharedBlockingCallback.java:<span class="number">195</span>)</span><br><span class="line">        ... <span class="number">33</span> more</span><br></pre></td></tr></table></figure>
<h1 id="3-导入数据问题"><a href="#3-导入数据问题" class="headerlink" title="(3)　导入数据问题"></a>(3)　导入数据问题</h1><h1 id="3-1-Expected-‘–nodes’-to-have-at-least-1-valid-item-but-had-0"><a href="#3-1-Expected-‘–nodes’-to-have-at-least-1-valid-item-but-had-0" class="headerlink" title="(3.1)　Expected ‘–nodes’ to have at least 1 valid item, but had 0 []"></a>(3.1)　Expected ‘–nodes’ to have at least 1 valid item, but had 0 []</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\bin&gt;neo4j-import  --into retail.db  --id-type string  --nodes:Customer  customers.csv  --nodes  products.csv  --nodes orders_header.csv,orders1.csv,orders2.csv  --relationships:CONTAINS order_details.csv  --relationships:ORDERED customer_orders_header.csv,orders1.csv,orders2.csv</span><br><span class="line">警告: This command does not appear to be running with administrative rights.  Some commands may fail e.g. Start/Stop</span><br><span class="line">WARNING: neo4j-import is deprecated and support for it will be removed in a future</span><br><span class="line">version of Neo4j; please use neo4j-admin import instead.</span><br><span class="line"></span><br><span class="line">Input error: Expected &apos;--nodes&apos; to have at least 1 valid item, but had 0 []</span><br><span class="line">Caused by:Expected &apos;--nodes&apos; to have at least 1 valid item, but had 0 []</span><br><span class="line">java.lang.IllegalArgumentException: Expected &apos;--nodes&apos; to have at least 1 valid item, but had 0 []</span><br><span class="line">        at org.neo4j.kernel.impl.util.Validators.lambda$atLeast$6(Validators.java:125)</span><br><span class="line">        at org.neo4j.helpers.Args.validated(Args.java:640)</span><br><span class="line">        at org.neo4j.helpers.Args.interpretOptionsWithMetadata(Args.java:608)</span><br><span class="line">        at org.neo4j.tooling.ImportTool.extractInputFiles(ImportTool.java:503)</span><br><span class="line">        at org.neo4j.tooling.ImportTool.main(ImportTool.java:388)</span><br><span class="line">        at org.neo4j.tooling.ImportTool.main(ImportTool.java:334)</span><br></pre></td></tr></table></figure>
<h1 id="3-2-Error-in-input-data"><a href="#3-2-Error-in-input-data" class="headerlink" title="(3.2)　Error in input data"></a>(3.2)　Error in input data</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.2\bin&gt;neo4j-import -into test.db  --id-type string  --nodes:Test C:/User/wdb/2017-04-06_test.csv  --stacktrace truektrace true  --skip-duplicate-nodes true</span><br><span class="line">警告: This command does not appear to be running with administrative rights.  Some commands may fail e.g. Start/Stop</span><br><span class="line">WARNING: neo4j-import is deprecated and support for it will be removed in a future</span><br><span class="line">version of Neo4j; please use neo4j-admin import instead.</span><br><span class="line"></span><br><span class="line">Neo4j version: 3.1.2</span><br><span class="line">Importing the contents of these files into test.db:</span><br><span class="line">Nodes:</span><br><span class="line">  :Test</span><br><span class="line">  C:\User\wdb\2017-04-06_test.csv</span><br><span class="line"></span><br><span class="line">Available resources:</span><br><span class="line">  Free machine memory: 3.74 GB</span><br><span class="line">  Max heap memory : 1.77 GB</span><br><span class="line">  Processors: 4</span><br><span class="line"></span><br><span class="line">Nodes</span><br><span class="line">Error in input data</span><br><span class="line">Caused by:ERROR in input</span><br><span class="line">  data source: BufferedCharSeeker[source:C:\User\wdb\2017-04-06_test.csv, position:654, line:11]</span><br><span class="line">  in field: mobile:int:6</span><br><span class="line">  for header: [dep:string, uid:int, name:string, tel:int, fax:string, mobile:int, email:string, id:string]</span><br><span class="line">  raw field value: 13900001111</span><br><span class="line">  original error: Not supported a.t.m</span><br></pre></td></tr></table></figure>
<p>错误原因是 用int表示电话号码，超范围了。最后换成用String保存电话号码。</p>
<h2 id="3-2-Missing-header-od-type-start-id"><a href="#3-2-Missing-header-od-type-start-id" class="headerlink" title="(3.2)　Missing header od type start_id"></a>(3.2)　Missing header od type start_id</h2><p>import date has problem , please check the data<br>数据有问题，检查csv文件里的数据格式，看少了什么东西</p>
<h1 id="4-工程问题"><a href="#4-工程问题" class="headerlink" title="(4)　工程问题"></a>(4)　工程问题</h1><p>##　(4.1)　Cannot determine embedded database driver class for database type NONE.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private javax.sql.DataSource org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.dataSource; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;dataSource&apos; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method &apos;dataSource&apos; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).</span><br><span class="line">Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;dataSource&apos; defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceAutoConfiguration$NonEmbeddedConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method &apos;dataSource&apos; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).</span><br><span class="line">Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method &apos;dataSource&apos; threw exception; nested exception is org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).</span><br><span class="line">Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Cannot determine embedded database driver class for database type NONE. If you want an embedded database please put a supported one on the classpath. If you have database settings to be loaded from a particular profile you may need to active it (no profiles are currently active).</span><br></pre></td></tr></table></figure></p>
<p>  spring-data-jpa 和 spring-data-neo4j 不兼容，只能升级版本解决了</p>
<h2 id="4-2-org-neo4j-driver-v1-exceptions-ClientException-You-cannot-begin-a-transaction-on-a-session-with-an-open-transaction"><a href="#4-2-org-neo4j-driver-v1-exceptions-ClientException-You-cannot-begin-a-transaction-on-a-session-with-an-open-transaction" class="headerlink" title="(4.2)　org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction;"></a>(4.2)　org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction;</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.</span><br><span class="line">        at org.neo4j.driver.internal.InternalSession.ensureNoOpenTransactionBeforeOpeningTransaction(InternalSession.java:196)</span><br><span class="line">        at org.neo4j.driver.internal.InternalSession.ensureConnectionIsValidBeforeOpeningTransaction(InternalSession.java:167)</span><br><span class="line">        at org.neo4j.driver.internal.InternalSession.beginTransaction(InternalSession.java:135)</span><br><span class="line">        at org.neo4j.jdbc.bolt.BoltPreparedStatement.executeInternal(BoltPreparedStatement.java:89)</span><br><span class="line">        at org.neo4j.jdbc.bolt.BoltPreparedStatement.executeQuery(BoltPreparedStatement.java:54)</span><br><span class="line">        at com.xxxx.xxxx.odk.neo4j.utils.CypherResult.getCypherResultList(CypherResult.java:34)</span><br><span class="line">        at com.xxxx.xxxx.odk.neo4j.search.impl.JdbcSearchImpl.getRelationshipsBetweenTwoDifferentLabelNodes(JdbcSearchImpl.java:399)</span><br><span class="line">        at com.xxxx.xxxx.xxxxxxxx.service.impl.OperationServiceImpl.getDetailInformation(OperationServiceImpl.java:95)</span><br><span class="line">        at com.xxxx.xxxx.xxxxxxxx.controller.OperationController.getDetailInformation(OperationController.java:34)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">        at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)</span><br><span class="line">        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)</span><br><span class="line">        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)</span><br><span class="line">        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)</span><br><span class="line">        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)</span><br><span class="line">        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)</span><br><span class="line">        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)</span><br><span class="line">        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)</span><br><span class="line">        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)</span><br><span class="line">        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)</span><br><span class="line">        at javax.servlet.http.HttpServlet.service(HttpServlet.java:635)</span><br><span class="line">        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)</span><br><span class="line">        at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)</span><br><span class="line">        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230)</span><br><span class="line">        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165)</span><br></pre></td></tr></table></figure>
<p>事务的问题，多看看事务的资料</p>
<h2 id="4-3-Exception-in-thread-“Thread-0”-org-neo4j-driver-v1-exceptions-ClientException-Unable-to-connect-to-‘172-23-22-27’-on-port-7687-ensure-the-database-is-running-and-that-there-is-a-working-network-connection-to-it"><a href="#4-3-Exception-in-thread-“Thread-0”-org-neo4j-driver-v1-exceptions-ClientException-Unable-to-connect-to-‘172-23-22-27’-on-port-7687-ensure-the-database-is-running-and-that-there-is-a-working-network-connection-to-it" class="headerlink" title="(4.3)　Exception in thread “Thread-0” org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to ‘172.23.22.27’ on port 7687, ensure the database is running and that there is a working network connection to it."></a>(4.3)　Exception in thread “Thread-0” org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to ‘172.23.22.27’ on port 7687, ensure the database is running and that there is a working network connection to it.</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;Thread-0&quot; org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to &apos;172.23.22.27&apos; on port 7687, ensure the database is running and that there is a working network connection to it.</span><br><span class="line">	at org.neo4j.driver.internal.connector.socket.SocketClient.start(SocketClient.java:82)</span><br></pre></td></tr></table></figure>
<p>使用neo4j-java-driver时，用完连接没有释放，导致连接用尽。<br>在使用完注意加上 session.close();　driver.close();</p>
<h2 id="4-4-org-neo4j-driver-v1-exceptions-clientException-General-SSLEngine-problem"><a href="#4-4-org-neo4j-driver-v1-exceptions-clientException-General-SSLEngine-problem" class="headerlink" title="(4.4)　org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem"></a>(4.4)　org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem</span><br></pre></td></tr></table></figure>
<ol>
<li>在当前用户的目录下找 .neo4j/known_hosts 文件，找到后删除就可以了</li>
<li>在新版本里，SSL认证方式发生变化，需要修改配置文件neo4j.conf，修改70行，102行，103行，把前面的#去掉，重启neo4j数据库</li>
<li>dbms.connector.bolt.tls_level=DISABLED</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># Bolt connector</span><br><span class="line">dbms.connector.bolt.enabled=true</span><br><span class="line">dbms.connector.bolt.tls_level=OPTIONAL</span><br><span class="line">dbms.connector.bolt.listen_address=:5687</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#*****************************************************************</span><br><span class="line"># SSL system configuration</span><br><span class="line">#*****************************************************************</span><br><span class="line"></span><br><span class="line"># Names of the SSL policies to be used for the respective components.</span><br><span class="line"></span><br><span class="line"># The legacy policy is a special policy which is not defined in</span><br><span class="line"># the policy configuration section, but rather derives from</span><br><span class="line"># dbms.directories.certificates and associated files</span><br><span class="line"># (by default: neo4j.key and neo4j.cert). Its use will be deprecated.</span><br><span class="line"></span><br><span class="line"># The policies to be used for connectors.</span><br><span class="line">#</span><br><span class="line"># N.B: Note that a connector must be configured to support/require</span><br><span class="line">#      SSL/TLS for the policy to actually be utilized.</span><br><span class="line">#</span><br><span class="line"># see: dbms.connector.*.tls_level</span><br><span class="line"></span><br><span class="line">bolt.ssl_policy=legacy</span><br><span class="line">https.ssl_policy=legacy</span><br></pre></td></tr></table></figure>
<p>I think you need to delete the file ~/neo/known_hosts (or at least open it and delete the line that starts with localhost:7687). When you are using trust-on-first-use the driver will accept the first certificate it sees and store it in the known_hosts-file, if the driver sees any other certificates it will reject them. However when you upgrade the server it will generate a new certificate and it will no longer match the certificate in the known_hosts-file.</p>
<h2 id="4-5-Caused-by-java-io-IOException-Broken-pipe"><a href="#4-5-Caused-by-java-io-IOException-Broken-pipe" class="headerlink" title="(4.5)　Caused by: java.io.IOException: Broken pipe"></a>(4.5)　Caused by: java.io.IOException: Broken pipe</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">org.neo4j.driver.v1.exceptions.ClientException: Unable to send messages to server: Broken pipe</span><br><span class="line">org.neo4j.driver.v1.exceptions.ClientException: Unable to send messages to server: Broken pipe</span><br><span class="line"></span><br><span class="line">Caused by: java.io.IOException: Broken pipe</span><br><span class="line">	at sun.nio.ch.FileDispatcherImpl.write0(Native Method)</span><br><span class="line">	at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:47)</span><br><span class="line">	at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:93)</span><br><span class="line">	at sun.nio.ch.IOUtil.write(IOUtil.java:51)</span><br><span class="line">	at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:471)</span><br><span class="line">	at org.neo4j.driver.internal.connector.socket.TLSSocketChannel.wrap(TLSSocketChannel.java:282)</span><br><span class="line">	at org.neo4j.driver.internal.connector.socket.TLSSocketChannel.write(TLSSocketChannel.java:390)</span><br><span class="line">	at org.neo4j.driver.internal.connector.socket.ChunkedOutput.flush(ChunkedOutput.java:62)</span><br><span class="line">	at org.neo4j.driver.internal.packstream.PackStream$Packer.flush(PackStream.java:173)</span><br><span class="line">	at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Writer.flush(PackStreamMessageFormatV1.java:329)</span><br><span class="line">	at org.neo4j.driver.internal.messaging.PackStreamMessageFormatV1$Writer.flush(PackStreamMessageFormatV1.java:100)</span><br><span class="line">	at org.neo4j.driver.internal.connector.socket.SocketClient.send(SocketClient.java:114)</span><br><span class="line">	at org.neo4j.driver.internal.connector.socket.SocketConnection.flush(SocketConnection.java:108)</span><br><span class="line">	... 113 more</span><br></pre></td></tr></table></figure>
<ol>
<li>程序有问题，报错太多了</li>
<li>ulimit没有优化，设置ulimit</li>
</ol>
<p>这个异常是客户端读取超时关闭了连接,这时候服务器端再向客户端已经断开的连接写数据时就发生了broken pipe异常！</p>
<p><img src="https://blog.csdn.net/zqz_zqz/article/details/52235479" alt="java.io.IOException 断开的管道 解决方法 ClientAbortException: java.io.IOException: Broken pipe"><br><img src="https://stackoverflow.com/questions/4584904/what-causes-the-broken-pipe-error" alt="What causes the Broken Pipe Error?"></p>
<h2 id="4-x"><a href="#4-x" class="headerlink" title="(4.x)"></a>(4.x)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\bin</span><br><span class="line">λ neo4j console</span><br><span class="line">2018-04-28 01:40:12.128+0000 INFO  Starting...</span><br><span class="line">2018-04-28 01:40:13.614+0000 INFO  Bolt enabled on 0.0.0.0:7687.</span><br><span class="line">2018-04-28 01:40:19.501+0000 INFO  Started.</span><br><span class="line">2018-04-28 01:40:20.920+0000 INFO  Remote interface available at http://localhost:7474/</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">WKQ@WKQ-PC MINGW64 /c/ProfessionSofware/Neo4j/neo4j-community-3.1.0/data/databases</span><br><span class="line">$ rm -rf graph.db/</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.counts.db.a&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.labeltokenstore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.labeltokenstore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.labeltokenstore.db.names&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.labeltokenstore.db.names.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.nodestore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.nodestore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.nodestore.db.labels&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.nodestore.db.labels.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.arrays&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.arrays.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.index&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.index.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.index.keys&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.index.keys.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.strings&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.propertystore.db.strings.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshipgroupstore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshipgroupstore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshipstore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshipstore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshiptypestore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshiptypestore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshiptypestore.db.names&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.relationshiptypestore.db.names.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.schemastore.db&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.schemastore.db.id&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/neostore.transaction.db.0&apos;: Device or resource busy</span><br><span class="line">rm: cannot remove &apos;graph.db/store_lock&apos;: Device or resource busy</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">2018-04-28 01:44:15.449+0000 INFO  Neo4j Server shutdown initiated by request</span><br><span class="line">2018-04-28 01:44:15.517+0000 INFO  Stopping...</span><br><span class="line">终止批处理操作吗(Y/N)? Exception in thread &quot;Thread-11&quot; java.lang.RuntimeException: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component &apos;org.ne</span><br><span class="line">o4j.kernel.NeoStoreDataSource$5@58dcfcb2&apos; from STOPPED to SHUTTING_DOWN. Please see attached cause exception</span><br><span class="line"></span><br><span class="line">Caused by: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component &apos;org.neo4j.kernel.NeoStoreDataSource$5@58dcfcb2&apos; from STOPPED to SHUTTING_DOWN. Please see attached cause exception</span><br><span class="line"></span><br><span class="line">        Suppressed: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component &apos;org.neo4j.kernel.impl.storageengine.impl.recordstorage.RecordStorageEngine@6661b54d&apos; from STOPPED to SHUTTING_DOWN. Please see attached cause exception</span><br><span class="line"></span><br><span class="line">        Caused by: java.io.IOException: Exception closing multiple resources</span><br><span class="line"></span><br><span class="line">        Caused by: java.io.IOException: Exception closing multiple resources</span><br><span class="line"></span><br><span class="line">        Caused by: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\write.lock</span><br><span class="line"></span><br><span class="line">                Suppressed: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\_1.cfe</span><br><span class="line">                        at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79)</span><br><span class="line"></span><br><span class="line">        Suppressed: org.neo4j.kernel.lifecycle.LifecycleException: Failed to transition component &apos;org.neo4j.kernel.impl.pagecache.PageCacheLifecycle@6df2bf5d&apos; from STOPPED to SHUTTING_DOWN. Please see attached cause exception</span><br><span class="line"></span><br><span class="line">        Caused by: java.lang.IllegalStateException: Cannot close the PageCache while files are still mapped:</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.counts.db.a (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshipgroupstore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.schemastore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.labeltokenstore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.labeltokenstore.db.names (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshiptypestore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshiptypestore.db.names (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.relationshipstore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.arrays (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.strings (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.index (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.propertystore.db.index.keys (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.nodestore.db (1 mapping)</span><br><span class="line">        C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\neostore.nodestore.db.labels (1 mapping)</span><br><span class="line">                at org.neo4j.io.pagecache.impl.muninn.MuninnPageCache.close(MuninnPageCache.java:610)</span><br><span class="line">                at org.neo4j.kernel.impl.pagecache.PageCacheLifecycle.shutdown(PageCacheLifecycle.java:42)</span><br><span class="line">                at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.shutdown(LifeSupport.java:488)</span><br><span class="line">                ... 10 more</span><br><span class="line">Caused by: org.neo4j.kernel.impl.store.UnderlyingStorageException: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\write.lock</span><br><span class="line"></span><br><span class="line">Caused by: java.nio.file.NoSuchFileException: C:\ProfessionSofware\Neo4j\neo4j-community-3.1.0\data\databases\graph.db\schema\label\lucene\labelStore\1\write.lock</span><br></pre></td></tr></table></figure>
<h1 id="5-部署问题"><a href="#5-部署问题" class="headerlink" title="(5)　部署问题"></a>(5)　部署问题</h1><h2 id="5-1-no-suitable-driver-foune"><a href="#5-1-no-suitable-driver-foune" class="headerlink" title="(5.1)　no suitable driver foune"></a>(5.1)　no suitable driver foune</h2><p><code>no suitable driver foune for jdbc:neo4j:http:http://127.0.0.1:7474</code></p>
<ol>
<li>Class.forName(url).newInstance()</li>
<li>把jar放在$jre/lib/ext下面</li>
</ol>
<h1 id="5-2-WARNING-Max-1024-open-files-allowed-minimum-of-40000-recommended-See-the-Neo4j-manual"><a href="#5-2-WARNING-Max-1024-open-files-allowed-minimum-of-40000-recommended-See-the-Neo4j-manual" class="headerlink" title="(5.2)　WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual."></a>(5.2)　WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[admin@user01 neo4j-community-3.1.3]$ ./bin/neo4j start</span><br><span class="line">Starting Neo4j.</span><br><span class="line">WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.</span><br><span class="line">Started neo4j (pid 8480). It is available at http://localhost:7474/</span><br><span class="line">There may be a short delay until the server is ready.</span><br><span class="line">See /home/admin/databases/neo4j-community-3.1.3/logs/neo4j.log <span class="keyword">for</span> current status.</span><br></pre></td></tr></table></figure>
<p>  Linux平台对用户可能打开的并发文件的数量施加了上限。默认是1024。使用ulimit -n命令为当前用户和会话查看<br>  ulimit -n<br>  把用户可打开的并发文件数量改大点，比如改成40000。</p>
<p>  切换成root用户<br>  编辑/etc/security/limits.conf并添加以下两行：<br>  neo4j soft nofile 40000<br>  neo4j hard nofile 40000<br>  编辑/etc/pam.d/su并取消注释或添加以下行：<br>  会话需要pam_limits.so<br>  需要重新启动才能使设置生效。<br>  在上述过程之后，neo4j用户将具有40,000个同时打开文件的限制。如果您继续遇到太多打开文件或Could not stat（）目录的异常，则可能需要进一步提高限制。</p>
<h1 id="6-neo4j-community限制问题"><a href="#6-neo4j-community限制问题" class="headerlink" title="(6)　neo4j-community限制问题"></a>(6)　neo4j-community限制问题</h1><h2 id="org-springframework-dao-DataRetrievalFailureException-‘type‘-on"><a href="#org-springframework-dao-DataRetrievalFailureException-‘type‘-on" class="headerlink" title="org.springframework.dao.DataRetrievalFailureException: ‘type‘ on"></a>org.springframework.dao.DataRetrievalFailureException: ‘<strong>type</strong>‘ on</h2><p><code>org.springframework.dao.DataRetrievalFailureException: &#39;__type__&#39; on</code></p>
<p>neo4j-community 最多允许 2^35个节点，2^35个关系，2^36个属性，属性类型不能超过2^16个<br>属性类型超过65535个了 (类似于MySQL里字段超过65535个)</p>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p>[1] <a href="https://neo4j.com/docs/" target="_blank" rel="noopener">https://neo4j.com/docs/</a><br>[2] <a href="https://stackoverflow.com/questions/13803609/dataretrievalfailureexception-type-not-found-in-spring-data-neo4j" target="_blank" rel="noopener">https://stackoverflow.com/questions/13803609/dataretrievalfailureexception-type-not-found-in-spring-data-neo4j</a><br>[3] <a href="https://groups.google.com/forum/#!topic/neo4j/aFZCp5T3ABo" target="_blank" rel="noopener">https://groups.google.com/forum/#!topic/neo4j/aFZCp5T3ABo</a><br>[4] <a href="https://github.com/neo4j/neo4j-java-driver/issues/174" target="_blank" rel="noopener">https://github.com/neo4j/neo4j-java-driver/issues/174</a><br>[5] <a href="https://stackoverflow.com/questions/37240461/general-sslengine-error-in-neo4j" target="_blank" rel="noopener">https://stackoverflow.com/questions/37240461/general-sslengine-error-in-neo4j</a></p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/neo4j/" rel="tag"># neo4j</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/05/30/blog-notes/" rel="next" title="为什么要写博客">
                <i class="fa fa-chevron-left"></i> 为什么要写博客
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/02/wikipedia-data-downlaod/" rel="prev" title="wikipedia 数据 下载 使用">
                wikipedia 数据 下载 使用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">WKQ</p>
              <p class="site-description motion-element" itemprop="description">不积跬步无以至千里</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">168</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">25</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">55</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/wkq278276130" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:weikeqin.cn@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://plus.google.com/u/0/107737814703120725006" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i>Google</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/wkq278276130" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.facebook.com/keqin.wei.5" target="_blank" title="FB Page"><i class="fa fa-fw fa-facebook"></i>FB Page</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://stackoverflow.com/users/8054088/wkq" target="_blank" title="StackOverflow"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-启动问题"><span class="nav-number">1.</span> <span class="nav-text">(1)　启动问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-1-Neo4j启动没反应但也不报错"><span class="nav-number">2.</span> <span class="nav-text">(1.1) Neo4j启动没反应但也不报错</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-2-org-neo4j-server-database-LifecycleManagingDatabase-was-successfully-initialized-but-failed-to-start"><span class="nav-number">3.</span> <span class="nav-text">(1.2) org.neo4j.server.database.LifecycleManagingDatabase was successfully initialized, but failed to start</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-TLS-private-key-found-but-missing-certificate"><span class="nav-number">3.1.</span> <span class="nav-text">(1.3)　TLS private key found, but missing certificate</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-4-browser-scripts-8eea4b31-components-js-org-eclipse-jetty-util-SharedBlockingCallback-BlockerTimeoutException"><span class="nav-number">4.</span> <span class="nav-text">(1.4)　/browser/scripts/8eea4b31.components.js org.eclipse.jetty.util.SharedBlockingCallback$BlockerTimeoutException</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#1-5-Not-possible-to-upgrade-a-store-with-version-‘v0-A-8’-to-current-store-version-v0-A-7-Neo4j-3-1-0"><span class="nav-number">5.</span> <span class="nav-text">(1.5)　Not possible to upgrade a store with version ‘v0.A.8’ to current store version v0.A.7 (Neo4j 3.1.0).</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-java-lang-IllegalArgumentException-Base-directory-‘C-ProfessionSofware-Neo4j-neo4j-community-3-3-4-certificates-default’-for-SSL-policy-with-name-‘default’-does-not-exist"><span class="nav-number">5.1.</span> <span class="nav-text">(1.6)  java.lang.IllegalArgumentException: Base directory ‘C:\ProfessionSofware\Neo4j\neo4j-community-3.3.4\certificates\default’ for SSL policy with name ‘default’ does not exist.</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-Neo4j-DespTop-前端展示-问题"><span class="nav-number">6.</span> <span class="nav-text">(2)　Neo4j-DespTop(前端展示)问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-WebSocket-connection-failure"><span class="nav-number">6.1.</span> <span class="nav-text">(2.1)　WebSocket connection failure</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#前端页面打不开"><span class="nav-number">6.2.</span> <span class="nav-text">前端页面打不开</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-导入数据问题"><span class="nav-number">7.</span> <span class="nav-text">(3)　导入数据问题</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-1-Expected-‘–nodes’-to-have-at-least-1-valid-item-but-had-0"><span class="nav-number">8.</span> <span class="nav-text">(3.1)　Expected ‘–nodes’ to have at least 1 valid item, but had 0 []</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-2-Error-in-input-data"><span class="nav-number">9.</span> <span class="nav-text">(3.2)　Error in input data</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Missing-header-od-type-start-id"><span class="nav-number">9.1.</span> <span class="nav-text">(3.2)　Missing header od type start_id</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-工程问题"><span class="nav-number">10.</span> <span class="nav-text">(4)　工程问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-org-neo4j-driver-v1-exceptions-ClientException-You-cannot-begin-a-transaction-on-a-session-with-an-open-transaction"><span class="nav-number">10.1.</span> <span class="nav-text">(4.2)　org.neo4j.driver.v1.exceptions.ClientException: You cannot begin a transaction on a session with an open transaction;</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-Exception-in-thread-“Thread-0”-org-neo4j-driver-v1-exceptions-ClientException-Unable-to-connect-to-‘172-23-22-27’-on-port-7687-ensure-the-database-is-running-and-that-there-is-a-working-network-connection-to-it"><span class="nav-number">10.2.</span> <span class="nav-text">(4.3)　Exception in thread “Thread-0” org.neo4j.driver.v1.exceptions.ClientException: Unable to connect to ‘172.23.22.27’ on port 7687, ensure the database is running and that there is a working network connection to it.</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-org-neo4j-driver-v1-exceptions-clientException-General-SSLEngine-problem"><span class="nav-number">10.3.</span> <span class="nav-text">(4.4)　org.neo4j.driver.v1.exceptions.clientException  General SSLEngine problem</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-5-Caused-by-java-io-IOException-Broken-pipe"><span class="nav-number">10.4.</span> <span class="nav-text">(4.5)　Caused by: java.io.IOException: Broken pipe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-x"><span class="nav-number">10.5.</span> <span class="nav-text">(4.x)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-部署问题"><span class="nav-number">11.</span> <span class="nav-text">(5)　部署问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-no-suitable-driver-foune"><span class="nav-number">11.1.</span> <span class="nav-text">(5.1)　no suitable driver foune</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-2-WARNING-Max-1024-open-files-allowed-minimum-of-40000-recommended-See-the-Neo4j-manual"><span class="nav-number">12.</span> <span class="nav-text">(5.2)　WARNING: Max 1024 open files allowed, minimum of 40000 recommended. See the Neo4j manual.</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-neo4j-community限制问题"><span class="nav-number">13.</span> <span class="nav-text">(6)　neo4j-community限制问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#org-springframework-dao-DataRetrievalFailureException-‘type‘-on"><span class="nav-number">13.1.</span> <span class="nav-text">org.springframework.dao.DataRetrievalFailureException: ‘type‘ on</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#References"><span class="nav-number">14.</span> <span class="nav-text">References</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WKQ</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Mist</a> v6.3.0
  <span>｜one of Hosted by 
	 <a href="https://pages.coding.me" rel="external nofollow">Coding Pages</a>
  </span>
</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="总访客量">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="总访问量">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>





  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=65182271";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
      <div id="needsharebutton-float">
        <span class="btn">
          <i class="fa fa-share-alt" aria-hidden="true"></i>
        </span>
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  





  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
    
  
  <script src="//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: true,
        appId: 'Ca876j76FoCQi1SShjT0qC6k-gzGzoHsz',
        appKey: 'IeozLmM20GuvfcslfWgdNXP0',
        placeholder: '期待您的评论',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=6.3.0"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("Ca876j76FoCQi1SShjT0qC6k-gzGzoHsz", "IeozLmM20GuvfcslfWgdNXP0");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.get('time'));
            
            counter.save(null, {
              success: function(counter) {
                
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  
  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
      flOptions = {};
      
          flOptions.iconStyle = "box";
      
          flOptions.boxForm = "horizontal";
      
          flOptions.position = "middleRight";
      
          flOptions.networks = "Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-float', flOptions);
    
  </script>

  

  

  

  

  

  

</body>
</html>
